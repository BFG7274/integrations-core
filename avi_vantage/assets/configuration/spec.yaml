name: Avi Vantage
files:
- name: avi_vantage.yaml
  options:
  - template: init_config
    options:
    - template: init_config/openmetrics
  - template: instances
    options:
    - name: avi_controller_url
      required: true
      description: The Controller base API URL
      value:
        example: https://<AVI_CONTROLLER_HOSTNAME>/
        type: string
    - name: collect_events
      required: false
      hidden: true
      description: Whether or not to collect Avi Vantage Events and send them as Datadog logs.
      value:
        example: false
        type: boolean
    - name: entities
      required: false
      description: |
        List of entity types to collect metrics from. Valid options are
        "controller", "pool", "service engine" and "virtual service". By default all types
        are monitored.
      value:
        type: array
        example:
        - controller
        - pool
        - service engine
        - virtual service
        default:
          - controller
          - pool
          - service engine
          - virtual service
        items:
          type: string
          enum:
            - controller
            - pool
            - service engine
            - virtual service
    - template: instances/openmetrics
      overrides:
        openmetrics_endpoint.hidden: true
