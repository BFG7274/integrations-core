name: Exchange Server
files:
- name: exchange_server.yaml
  options:
  - template: init_config
    options:
    - template: init_config/perf_counters
    - template: init_config/default
  - template: instances
    options:
    - template: instances/perf_counters
      overrides:
        extra_metrics.value.example:
          MSExchange Content Filter Agent:
            name: content_filter
            counters:
            - Messages that Bypassed Scanning: bypassed_messages
    - template: instances/pdh_legacy
      hidden: true
    - template: instances/default
  - name: use_legacy_check_version
    hidden: true
    required: false
    description: |
      For backward compatibility reasons, it is possible to use a legacy version of the exchange_server
      integration by setting this field to "true".
    value:
        type: boolean
        example: false

  - template: logs
    example:
    - type: file
      path: "C:\\\\Program Files\\\\Microsoft\\\\Exchange Server\\\\V15\\\\TransportRoles\\\\Logs\\\\CommonDiagnosticsLog\\\\*"
      source: exchange-server
    - type: file
      path: "C:\\\\Program Files\\\\Microsoft\\\\Exchange Server\\\\V15\\\\TransportRoles\\\\Logs\\\\ThrottlingService\\\\*"
      source: exchange-server
    - type: file
      path: "C:\\\\Program Files\\\\Microsoft\\\\Exchange Server\\\\V15\\\\TransportRoles\\\\Logs\\\\Hub\\\\Connectivity\\\\*"
      source: exchange-server
