version: '3'

services:
  voltdb0:
    image: ${VOLTDB_IMAGE}
    container_name: voltdb0
    environment:
      - HOST_COUNT=3
      - HOSTS=voltdb0,voltdb1,voltdb2
    volumes:
      - ./deployment.xml:/tmp/deployment.xml
      - ./log4j.xml:/opt/voltdb/voltdb/log4j.xml
    ports:
      - ${VOLTDB_CLIENT_PORT}:8080  # JSON Interface: https://docs.voltdb.com/UsingVoltDB/ProgLangJson.php

  voltdb1:
    image: ${VOLTDB_IMAGE}
    container_name: voltdb1
    environment:
      - HOST_COUNT=3
      - HOSTS=voltdb0,voltdb1,voltdb2
    volumes:
      - ./deployment.xml:/tmp/deployment.xml
      - ./log4j.xml:/opt/voltdb/voltdb/log4j.xml

  voltdb2:
    image: ${VOLTDB_IMAGE}
    container_name: voltdb2
    environment:
      - HOST_COUNT=3
      - HOSTS=voltdb0,voltdb1,voltdb2
    volumes:
      - ./deployment.xml:/tmp/deployment.xml
      - ./log4j.xml:/opt/voltdb/voltdb/log4j.xml
