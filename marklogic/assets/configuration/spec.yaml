name: MarkLogic
files:
- name: marklogic.yaml
  options:
  - template: init_config
    options:
    - template: init_config/http
    - template: init_config/default
  - template: instances
    options:
    - name: url
      required: true
      description: URL of MarkLogic REST API.
      value:
        example: http://localhost:8002/
        type: string
    - name: enable_health_service_checks
      description: |
        If `true`, the integration query the `/manage/v2?view=health` and submit the databases and forests health as 
        `marklogic.database.health` and `marklogic.forests.health` service checks.
        In order to send the service checks successfuly, the MarkLogic user should have `manage-admin` permission.
      value:
        default: false
        example: false
        type: boolean
    - name: resource_filters
      # TOOD: Add the "'id' is the resource id to match" option
      # TODO: Add the `metric_groups` option (storage, status, query)
      description: |
        Each filter in the list is composed of two to four parameters.
        'resource_type' is one of forest/database/host/server on which to apply the filter (required)
        'pattern' is a pattern to match the resource name (required)
        'include' is whether or not the filter include (default) or exclude the specified resources.
              `True` (default) include the matching resources, and `False` exclude them.
              If a resource match both an exclude filter and an include filter, it will be considered excluded.
        'group' is the resource group to match (optional)
      value:
        type: array
        items:
          type: object
        example:
        - resource_type: forest
          pattern: Documents
        - resource_type: database
          include: false
          pattern: Doc*
          group: Default
    - template: instances/http
    - template: instances/default
